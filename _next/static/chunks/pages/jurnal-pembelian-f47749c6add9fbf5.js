(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1889],{18377:function(e,a,l){"use strict";var t=l(61354);let n=(0,t.Z)();a.Z=n},74178:function(e,a,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/jurnal-pembelian",function(){return l(92222)}])},37140:function(e,a){"use strict";a.Z={baseUrl:"https://be-koperasi.dytech.my.id/api"}},92222:function(e,a,l){"use strict";l.r(a);var t=l(85893),n=l(1954),i=l(90629),s=l(15861),r=l(11057),u=l(5306),d=l(50135),h=l(94054),c=l(47312),o=l(18360),x=l(18972),m=l(67720),j=l(18377),p=l(67294),Z=l(37140),b=l(6154);l(86455);var g=l(96274),v=l(11163);let f=()=>{let e=localStorage.getItem("accessToken"),a=(0,v.useRouter)(),l=[],[f,w]=(0,p.useState)(null),[_,y]=(0,p.useState)([]),[C,k]=(0,p.useState)([{nama_produk:null,jumlah:null,harga_satuan:null,tipe_barang:null,satuan:null,total_harga:null}]),B=e=>{let a=C.filter((a,l)=>l!==e);k(a)},P=()=>{k([...C,{nama_produk:null,jumlah:null}])},S=async()=>{try{let a=await b.Z.get(Z.Z.baseUrl+"/supplier",{headers:{Authorization:"Bearer ".concat(e)}}),l=a.data.data;y(l)}catch(e){alert(e.message||"Error fetching suppliers")}};(0,p.useEffect)(()=>{S()},[]);let I=async()=>{try{await (0,b.Z)({method:"post",url:Z.Z.baseUrl+"/pembelian",headers:{Authorization:"Bearer "+e},data:{id_supplier:f,data:C}}).then(e=>{let{Toast:l}=(0,g.Z)({zIndex:1e3,position:"center"});l.fire({icon:"success",title:"Berhasil membuat pembelian baru"}).then(()=>{a.push("/jurnal-pembelian")})})}catch(e){alert(e)}};return(0,t.jsxs)(i.Z,{sx:{p:5},children:[(0,t.jsxs)(j.Z,{sx:{display:"flex",width:1,justifyContent:"space-between",mb:3},children:[(0,t.jsx)(s.Z,{sx:{fontSize:20},children:"Jurnal Pembelian - Tambah Stok"}),(0,t.jsx)(r.Z,{variant:"contained",onClick:P,children:(0,t.jsx)(n.JO,{icon:"mdi:plus"})})]}),C.map((e,a)=>(0,t.jsxs)(j.Z,{sx:{display:"flex",width:1,justifyContent:"space-between",mt:2},children:[(0,t.jsx)(u.Z,{disablePortal:!0,options:l,value:e.nama_produk||"",onChange:(e,l)=>{var t;let n=[...C];n[a]={...n[a],nama_produk:null!==(t=null==l?void 0:l.label)&&void 0!==t?t:null},k(n)},renderInput:l=>(0,t.jsx)(d.Z,{...l,value:e.nama_produk||"",label:"Nama Produk",onChange:e=>{let l=[...C];l[a]={...l[a],nama_produk:e.target.value},k(l)}}),sx:{width:"25%"}}),(0,t.jsxs)(h.Z,{sx:{width:"10%"},children:[(0,t.jsx)(c.Z,{id:"demo-simple-select-label",children:"Tipe Barang "}),(0,t.jsxs)(o.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:0,label:"Tipe Barang",onChange:e=>{let l=[...C];l[a]={...l[a],tipe_barang:e.target.value},k(l)},children:[(0,t.jsx)(x.Z,{value:0,children:"Pilih..."}),(0,t.jsx)(x.Z,{value:"Barang Baku",children:"Barang Baku"}),(0,t.jsx)(x.Z,{value:"Barang Bantu",children:"Barang Bantu"}),(0,t.jsx)(x.Z,{value:"Barang jual",children:"Barang Jual"}),(0,t.jsx)(x.Z,{value:"Lainnya",children:"Lainnya"})]})]}),(0,t.jsxs)(h.Z,{sx:{width:"10%"},children:[(0,t.jsx)(c.Z,{id:"demo-simple-select-label",children:"Satuan "}),(0,t.jsxs)(o.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:0,label:"Satuan",onChange:e=>{let l=[...C];l[a]={...l[a],satuan:e.target.value},k(l)},children:[(0,t.jsx)(x.Z,{value:0,children:"Pilih..."}),(0,t.jsx)(x.Z,{value:"ML",children:"ML"}),(0,t.jsx)(x.Z,{value:"L",children:"L"}),(0,t.jsx)(x.Z,{value:"PCS",children:"PCS"}),(0,t.jsx)(x.Z,{value:"CC",children:"CC"}),(0,t.jsx)(x.Z,{value:"KG",children:"KG"})]})]}),(0,t.jsx)(d.Z,{value:e.jumlah||"",sx:{width:"8%"},id:"outlined-basic",label:"Jumlah",variant:"outlined",type:"number",onChange:e=>{let l=[...C],t=e.target.value,n=l[a].harga_satuan||0;l[a]={...l[a],jumlah:t,total_harga:t*n},k(l)}}),(0,t.jsx)(d.Z,{value:e.harga_satuan||"",sx:{width:"18%"},id:"outlined-basic",label:"Harga Satuan",variant:"outlined",type:"number",onChange:e=>{let l=[...C],t=e.target.value,n=l[a].jumlah||0;l[a]={...l[a],harga_satuan:t,total_harga:n*t},k(l)}}),(0,t.jsx)(d.Z,{value:e.total_harga||"",sx:{width:"18%"},id:"outlined-basic",label:"Total Harga",variant:"outlined",type:"number",onChange:e=>{let l=[...C],t=e.target.value,n=l[a].jumlah||1;l[a]={...l[a],total_harga:t,harga_satuan:t/n},k(l)}}),(0,t.jsx)(r.Z,{color:"error",onClick:()=>B(a),children:(0,t.jsx)(n.JO,{icon:"mdi:delete",width:30})})]},a)),(0,t.jsx)(m.Z,{sx:{my:3}}),(0,t.jsx)(j.Z,{children:(0,t.jsxs)(h.Z,{sx:{width:"30%"},children:[(0,t.jsx)(c.Z,{id:"demo-simple-select-label",children:"Supplier"}),(0,t.jsxs)(o.Z,{labelId:"demo-simple-select-label",id:"demo-simple-select",defaultValue:0,label:"Suplier",onChange:e=>w(e.target.value),children:[(0,t.jsx)(x.Z,{value:0,children:"Pilih..."}),_.map((e,a)=>(0,t.jsx)(x.Z,{value:e.id,children:e.name},a))]})]})}),(0,t.jsx)(m.Z,{sx:{my:3}}),(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(s.Z,{sx:{fontSize:20},children:"Ringkasan Pembelian"}),(0,t.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"row",justifyItems:"flex-end",my:2,width:"300px"},children:[(0,t.jsx)(s.Z,{sx:{width:"50%"},children:"Total Harga"}),(0,t.jsx)(s.Z,{sx:{width:"5%"},children:":"}),(0,t.jsxs)(s.Z,{sx:{width:"45%"},children:["Rp ",(()=>{let e=C.reduce((e,a)=>e+(Number(a.total_harga)||0),0);return new Intl.NumberFormat("id-ID").format(e)})()]})]}),(0,t.jsxs)(j.Z,{sx:{display:"flex",flexDirection:"row",justifyItems:"flex-end",my:2,width:"300px"},children:[(0,t.jsx)(s.Z,{sx:{width:"50%"},children:"Total Produk"}),(0,t.jsx)(s.Z,{sx:{width:"5%"},children:":"}),(0,t.jsx)(s.Z,{sx:{width:"45%"},children:C.length})]})]}),(0,t.jsx)(j.Z,{sx:{display:"flex",justifyContent:"end",width:1},children:(0,t.jsx)(r.Z,{variant:"contained",onClick:I,children:"Proses Pembelian"})})]})};a.default=f}},function(e){e.O(0,[9774,2888,179],function(){return e(e.s=74178)}),_N_E=e.O()}]);